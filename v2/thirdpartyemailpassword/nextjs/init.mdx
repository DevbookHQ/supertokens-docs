---
id: init
title: 1. Configuration
hide_title: true
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import {Question, Answer}from "/src/components/question"
import AppInfoForm from "/src/components/appInfoForm"
import CoreInjector from "/src/components/coreInjector"

# 1. Configuration

## 1) Install packages
```jsx
yarn install supertokens-node
yarn install supertokens-auth-react
yarn install nextjs-cors
```

## 2) Create a configuration file (`config/supertokensConfig.js`)
- Create a `config` folder in the root directory of your project
- Create a `supertokensConfig.js` file inside the `config` folder.
- An example of this file can be found [here](https://github.com/supertokens/next.js/blob/canary/examples/with-supertokens/config/supertokensConfig.js).


## 3) Create a frontend config function

<AppInfoForm
    askForAppName={true}
    askForAPIDomain={true}
    askForWebsiteDomain={true}>

<Tabs
groupId="ts-or-js"
defaultValue="with-js"
values={[
{ label: '/config/supertokensConfig.js', value: 'with-js' },
{ label: '/config/supertokensConfig.ts', value: 'with-ts' },
]}>

<TabItem value="with-js">

```jsx

import ThirdPartyEmailPasswordReact from 'supertokens-auth-react/recipe/thirdpartyemailpassword'
import SessionReact from 'supertokens-auth-react/recipe/session'

const appInfo = {
  // learn more about this on https://supertokens.io/docs/thirdpartyemailpassword/appinfo
  appName: "^{form_appName}",
  apiDomain: "^{form_apiDomain}",
  websiteDomain: "^{form_websiteDomain}",
  apiBasePath: "/api/auth/",
}

export const frontendConfig = () => {
  return {
    appInfo,
    recipeList: [
      ThirdPartyEmailPasswordReact.init({
        signInAndUpFeature: {
          providers: [
            ThirdPartyEmailPasswordReact.Google.init(),
            ThirdPartyEmailPasswordReact.Facebook.init(),
          ],
        },
      }),
      SessionReact.init(),
    ],
  }
}
```
</TabItem>
<TabItem value="with-ts">

```jsx

import ThirdPartyEmailPasswordReact from 'supertokens-auth-react/recipe/thirdpartyemailpassword'
import SessionReact from 'supertokens-auth-react/recipe/session'

const appInfo = {
  // learn more about this on https://supertokens.io/docs/thirdpartyemailpassword/appinfo
  appName: "^{form_appName}",
  apiDomain: "^{form_apiDomain}",
  websiteDomain: "^{form_websiteDomain}",
  apiBasePath: "/api/auth/",
}

export const frontendConfig = () => {
  return {
    appInfo,
    recipeList: [
      ThirdPartyEmailPasswordReact.init({
        signInAndUpFeature: {
          providers: [
            ThirdPartyEmailPasswordReact.Google.init(),
            ThirdPartyEmailPasswordReact.Facebook.init(),
          ],
        },
      }),
      SessionReact.init(),
    ],
  }
}
```
</TabItem>
</Tabs>

</AppInfoForm>

## 4) Create a backend config function

<AppInfoForm
    askForWebsiteDomain={true}>

<CoreInjector>

<Tabs
groupId="ts-or-js"
defaultValue="with-js"
values={[
{ label: '/config/supertokensConfig.js', value: 'with-js' },
{ label: '/config/supertokensConfig.ts', value: 'with-ts' },
]}>
<TabItem value="with-js">

```jsx
import ThirdPartyEmailPasswordNode from 'supertokens-node/recipe/thirdpartyemailpassword'
import SessionNode from 'supertokens-node/recipe/session'

export const backendConfig = () => {
  return {
    framework: "express",
    supertokens: {
      ^{coreInjector_connection_uri_comment}
      connectionURI: ^{coreInjector_uri}
      ^{coreInjector_api_key_commented}apiKey: ^{coreInjector_api_key},
    },
    appInfo,
    recipeList: [
      ThirdPartyEmailPasswordNode.init({
        providers: [
          // We have provided you with development keys which you can use for testsing.
          // IMPORTANT: Please replace them with your own OAuth keys for production use.
          ThirdPartyEmailPasswordNode.Google({
            clientId: "1060725074195-kmeum4crr01uirfl2op9kd5acmi9jutn.apps.googleusercontent.com",
            clientSecret: "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"
          }),
          ThirdPartyEmailPasswordNode.Github({
            clientId: "467101b197249757c71f",
            clientSecret: "e97051221f4b6426e8fe8d51486396703012f5bd"
          }),
          // ThirdPartyEmailPasswordNode.Facebook({
          //   clientSecret: "FACEBOOK_CLIENT_SECRET",
          //   clientId: "FACEBOOK_CLIENT_ID",
          // }),
        ],
      }),
      SessionNode.init(),
    ],
    isInServerlessEnv: true,
  }
}
```
</TabItem>

<TabItem value="with-ts">

```jsx
import ThirdPartyEmailPasswordNode from 'supertokens-node/recipe/thirdpartyemailpassword'
import SessionNode from 'supertokens-node/recipe/session'

export const backendConfig = () => {
  return {
    framework: "express",
    supertokens: {
      ^{coreInjector_connection_uri_comment}
      connectionURI: ^{coreInjector_uri}
      ^{coreInjector_api_key_commented}apiKey: ^{coreInjector_api_key},
    },
    appInfo,
    recipeList: [
      ThirdPartyEmailPasswordNode.init({
        providers: [
          // We have provided you with development keys which you can use for testsing.
          // IMPORTANT: Please replace them with your own OAuth keys for production use.
          ThirdPartyEmailPasswordNode.Google({
            clientId: "1060725074195-kmeum4crr01uirfl2op9kd5acmi9jutn.apps.googleusercontent.com",
            clientSecret: "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"
          }),
          ThirdPartyEmailPasswordNode.Github({
            clientId: "467101b197249757c71f",
            clientSecret: "e97051221f4b6426e8fe8d51486396703012f5bd"
          }),
          // ThirdPartyEmailPasswordNode.Facebook({
          //   clientSecret: "FACEBOOK_CLIENT_SECRET",
          //   clientId: "FACEBOOK_CLIENT_ID",
          // }),
        ],
      }),
      SessionNode.init(),
    ],
    isInServerlessEnv: true,
  }
}
```
</TabItem>
</Tabs>

**When you want to generate your own keys**, please refer to the corresponding documentation to get your client ids and client secrets for each of the below providers:
- Google:
    - Generate your client ID and secret by following the [docs here](https://support.google.com/cloud/answer/6158849?hl=en)
    - Set the authorisation callback URL to `^{form_websiteDomain}/auth/callback/google`
- Github:
    - Generate your client ID and secret by following the [docs here](https://docs.github.com/en/developers/apps/creating-an-oauth-app)
    - Set the authorisation callback URL to `^{form_websiteDomain}/auth/callback/github`
- Facebook:
    - Generate your client ID and secret by following the [docs here](https://developers.facebook.com/docs/development/create-an-app)
    - Set the authorisation callback URL to `^{form_websiteDomain}/auth/callback/facebook`

</CoreInjector>

</AppInfoForm>

## 5) Call the `init` functions

- Create a `/pages/_app.js` file. You can learn more about this file [here](https://nextjs.org/docs/advanced-features/custom-app).
- An example of this can be found [here](https://github.com/supertokens/next.js/blob/canary/examples/with-supertokens/pages/_app.js)

<Tabs
groupId="ts-or-js"
defaultValue="app-js"
values={[
{ label: '/pages/_app.js', value: 'with-js' },
{ label: '/pages/_app.ts', value: 'with-ts' },
]}>
<TabItem value="with-js">

```jsx

import '../styles/globals.css'
import React from 'react'
import SuperTokensReact from 'supertokens-auth-react'
import SuperTokensNode from 'supertokens-node'

import * as SuperTokensConfig from '../config/supertokensConfig'

if (typeof window !== 'undefined') {
  SuperTokensReact.init(SuperTokensConfig.frontendConfig())
} else {
  SuperTokensNode.init(SuperTokensConfig.backendConfig())
}

function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}

export default MyApp

```
</TabItem>

<TabItem value="with-ts">

```jsx

import '../styles/globals.css'
import React from 'react'
import { AppProps } from 'next/app'
import SuperTokensReact from 'supertokens-auth-react'
import SuperTokensNode from 'supertokens-node'

import * as SuperTokensConfig from '../config/supertokensConfig'

if (typeof window !== 'undefined') {
  SuperTokensReact.init(SuperTokensConfig.frontendConfig())
} else {
  SuperTokensNode.init(SuperTokensConfig.backendConfig())
}

function MyApp({ Component, pageProps }: AppProps) {
  return <Component {...pageProps} />
}

export default MyApp

```
</TabItem>
</Tabs>

## 6) Add API interceptors for automatic session refreshing

<Question
    question="Do you use axios on your frontend?">
<Answer title="Yes">

:::important
You must call `addAxiosInterceptors` on all `axios` imports.
:::

<FrontendSDKTabs>
<TabItem value="reactjs">

```jsx
import axios from "axios";
// highlight-start
import Session from "supertokens-auth-react/recipe/session";
Session.addAxiosInterceptors(axios);
// highlight-end

async function callAPI() {
    // use axios as you normally do
    let response = await axios.get(...);
}
```

</TabItem>
</FrontendSDKTabs>

</Answer>
<Answer title="No">

:::success
Interceptors are added automatically. No action needed here.
:::

</Answer>
</Question>